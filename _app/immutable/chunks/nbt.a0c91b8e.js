import{e as j,f as N}from"./2.ec27719f.js";import{s as M,f as m,a as E,g as p,h as b,d as f,c as z,j as k,k as F,i as h,w as y,A as v,K as B,l as $,m as V,n as D,o as W,p as X}from"./scheduler.ac22207c.js";import{S as P,i as U,g as T,t as w,c as A,a as g,b as H,d as J,m as Q,e as R}from"./index.1bb6f5e4.js";import{T as _,c as Y}from"./nbt.ff4d3765.js";import{p as Z}from"./pako.esm.29d98458.js";function L(o,l,r){const n=o.slice();return n[2]=l[r],n}function C(o,l,r){const n=o.slice();return n[2]=l[r],n}function O(o,l,r){const n=o.slice();return n[1]=l[r][0],n[2]=l[r][1],n}function x(o){let l,r=j(o[0].value),n=[];for(let e=0;e<r.length;e+=1)n[e]=q(L(o,r,e));return{c(){l=m("div");for(let e=0;e<n.length;e+=1)n[e].c();this.h()},l(e){l=p(e,"DIV",{class:!0});var i=b(l);for(let t=0;t<n.length;t+=1)n[t].l(i);i.forEach(f),this.h()},h(){k(l,"class","nbt-list svelte-jf5zdg")},m(e,i){h(e,l,i);for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(l,null)},p(e,i){if(i&1){r=j(e[0].value);let t;for(t=0;t<r.length;t+=1){const s=L(e,r,t);n[t]?n[t].p(s,i):(n[t]=q(s),n[t].c(),n[t].m(l,null))}for(;t<n.length;t+=1)n[t].d(1);n.length=r.length}},i:v,o:v,d(e){e&&f(l),B(n,e)}}}function ee(o){let l,r,n=j(o[0].value),e=[];for(let t=0;t<n.length;t+=1)e[t]=G(C(o,n,t));const i=t=>w(e[t],1,1,()=>{e[t]=null});return{c(){l=m("div");for(let t=0;t<e.length;t+=1)e[t].c();this.h()},l(t){l=p(t,"DIV",{class:!0});var s=b(l);for(let a=0;a<e.length;a+=1)e[a].l(s);s.forEach(f),this.h()},h(){k(l,"class","nbt-list svelte-jf5zdg")},m(t,s){h(t,l,s);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,null);r=!0},p(t,s){if(s&1){n=j(t[0].value);let a;for(a=0;a<n.length;a+=1){const u=C(t,n,a);e[a]?(e[a].p(u,s),g(e[a],1)):(e[a]=G(u),e[a].c(),g(e[a],1),e[a].m(l,null))}for(T(),a=n.length;a<e.length;a+=1)i(a);A()}},i(t){if(!r){for(let s=0;s<n.length;s+=1)g(e[s]);r=!0}},o(t){e=e.filter(Boolean);for(let s=0;s<e.length;s+=1)w(e[s]);r=!1},d(t){t&&f(l),B(e,t)}}}function te(o){let l,r,n=j(Object.entries(o[0].value)),e=[];for(let t=0;t<n.length;t+=1)e[t]=K(O(o,n,t));const i=t=>w(e[t],1,1,()=>{e[t]=null});return{c(){l=m("div");for(let t=0;t<e.length;t+=1)e[t].c();this.h()},l(t){l=p(t,"DIV",{class:!0});var s=b(l);for(let a=0;a<e.length;a+=1)e[a].l(s);s.forEach(f),this.h()},h(){k(l,"class","nbt-compound svelte-jf5zdg")},m(t,s){h(t,l,s);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,null);r=!0},p(t,s){if(s&1){n=j(Object.entries(t[0].value));let a;for(a=0;a<n.length;a+=1){const u=O(t,n,a);e[a]?(e[a].p(u,s),g(e[a],1)):(e[a]=K(u),e[a].c(),g(e[a],1),e[a].m(l,null))}for(T(),a=n.length;a<e.length;a+=1)i(a);A()}},i(t){if(!r){for(let s=0;s<n.length;s+=1)g(e[s]);r=!0}},o(t){e=e.filter(Boolean);for(let s=0;s<e.length;s+=1)w(e[s]);r=!1},d(t){t&&f(l),B(e,t)}}}function le(o){let l,r=o[0].value+"",n,e;return{c(){l=$('"'),n=$(r),e=$('"')},l(i){l=V(i,'"'),n=V(i,r),e=V(i,'"')},m(i,t){h(i,l,t),h(i,n,t),h(i,e,t)},p(i,t){t&1&&r!==(r=i[0].value+"")&&D(n,r)},i:v,o:v,d(i){i&&(f(l),f(n),f(e))}}}function ne(o){let l=o[0].value+"",r;return{c(){r=$(l)},l(n){r=V(n,l)},m(n,e){h(n,r,e)},p(n,e){e&1&&l!==(l=n[0].value+"")&&D(r,l)},i:v,o:v,d(n){n&&f(r)}}}function q(o){let l,r=o[2]+"",n,e;return{c(){l=m("div"),n=$(r),e=E(),this.h()},l(i){l=p(i,"DIV",{class:!0});var t=b(l);n=V(t,r),e=z(t),t.forEach(f),this.h()},h(){k(l,"class","nbt-list-item svelte-jf5zdg")},m(i,t){h(i,l,t),y(l,n),y(l,e)},p(i,t){t&1&&r!==(r=i[2]+"")&&D(n,r)},d(i){i&&f(l)}}}function G(o){let l,r,n,e;return r=new S({props:{entry:o[2]}}),{c(){l=m("div"),H(r.$$.fragment),n=E(),this.h()},l(i){l=p(i,"DIV",{class:!0});var t=b(l);J(r.$$.fragment,t),n=z(t),t.forEach(f),this.h()},h(){k(l,"class","nbt-list-item svelte-jf5zdg")},m(i,t){h(i,l,t),Q(r,l,null),y(l,n),e=!0},p(i,t){const s={};t&1&&(s.entry=i[2]),r.$set(s)},i(i){e||(g(r.$$.fragment,i),e=!0)},o(i){w(r.$$.fragment,i),e=!1},d(i){i&&f(l),R(r)}}}function K(o){let l,r=o[1]+"",n,e,i,t,s;return i=new S({props:{entry:o[2]}}),{c(){l=m("div"),n=$(r),e=$(": "),H(i.$$.fragment),t=E(),this.h()},l(a){l=p(a,"DIV",{class:!0});var u=b(l);n=V(u,r),e=V(u,": "),J(i.$$.fragment,u),t=z(u),u.forEach(f),this.h()},h(){k(l,"class","nbt-compound-kv svelte-jf5zdg")},m(a,u){h(a,l,u),y(l,n),y(l,e),Q(i,l,null),y(l,t),s=!0},p(a,u){(!s||u&1)&&r!==(r=a[1]+"")&&D(n,r);const c={};u&1&&(c.entry=a[2]),i.$set(c)},i(a){s||(g(i.$$.fragment,a),s=!0)},o(a){w(i.$$.fragment,a),s=!1},d(a){a&&f(l),R(i)}}}function re(o){let l,r,n,e,i,t;const s=[ne,le,te,ee,x],a=[];function u(c,d){return c[0].tag==_.Byte||c[0].tag==_.Short||c[0].tag==_.Int||c[0].tag==_.Long||c[0].tag==_.Float||c[0].tag==_.Double?0:c[0].tag==_.String?1:c[0].tag==_.Compound?2:c[0].tag==_.List?3:c[0].tag==_.Byte_Array||c[0].tag==_.Int_Array||c[0].tag==_.Long_Array?4:-1}return~(e=u(o))&&(i=a[e]=s[e](o)),{c(){l=m("div"),r=m("span"),n=E(),i&&i.c(),this.h()},l(c){l=p(c,"DIV",{class:!0});var d=b(l);r=p(d,"SPAN",{class:!0,style:!0}),b(r).forEach(f),n=z(d),i&&i.l(d),d.forEach(f),this.h()},h(){k(r,"class","nbt-icon svelte-jf5zdg"),F(r,"background-position-y","-"+o[0].tag+"rem"),k(l,"class","nbt-container svelte-jf5zdg")},m(c,d){h(c,l,d),y(l,r),y(l,n),~e&&a[e].m(l,null),t=!0},p(c,[d]){(!t||d&1)&&F(r,"background-position-y","-"+c[0].tag+"rem");let I=e;e=u(c),e===I?~e&&a[e].p(c,d):(i&&(T(),w(a[I],1,1,()=>{a[I]=null}),A()),~e?(i=a[e],i?i.p(c,d):(i=a[e]=s[e](c),i.c()),g(i,1),i.m(l,null)):i=null)},i(c){t||(g(i),t=!0)},o(c){w(i),t=!1},d(c){c&&f(l),~e&&a[e].d()}}}function ie(o,l,r){let{entry:n}=l;return o.$$set=e=>{"entry"in e&&r(0,n=e.entry)},[n]}class S extends P{constructor(l){super(),U(this,l,ie,re,M,{entry:0})}}function ae(o){let l;return{c(){l=m("div")},l(r){l=p(r,"DIV",{}),b(l).forEach(f)},m(r,n){h(r,l,n),o[2](l)},p:v,i:v,o:v,d(r){r&&f(l),o[2](null)}}}function se(o,l,r){let{entry:n}=l,e;W(async()=>{const t=Y(Z.ungzip(await n.buffer()));new S({target:e,props:{entry:t}})});function i(t){X[t?"unshift":"push"](()=>{e=t,r(0,e)})}return o.$$set=t=>{"entry"in t&&r(1,n=t.entry)},[e,n,i]}class oe extends P{constructor(l){super(),U(this,l,se,ae,M,{entry:1})}}const de={namespace:"minecraft.nbt",priority:2,isValid:async o=>{if(o.type!=N.File||!o.name.includes(".dat"))return!1;const l=await o.blob();if(l.size==0)return!0;const r=await l.slice(0,2).arrayBuffer();return new DataView(r).getUint16(0,!1)==8075},createViewer:async(o,l)=>{if(o.type==N.File)new oe({target:l,props:{entry:o}});else throw new Error("Tried to create nbt viewer with directory.")}};export{de as default};
