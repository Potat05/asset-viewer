var c;(o=>{function d(t){const e=new Image;return e.src=URL.createObjectURL(new Blob([t])),new Promise((r,n)=>{function a(){e.removeEventListener("load",a),e.removeEventListener("error",i),r(e)}function i(f){n(f.message),e.removeEventListener("load",a),e.removeEventListener("error",i)}e.addEventListener("load",a),e.addEventListener("error",i)})}o.imgBuffer2img=d;async function u(t){const e=await d(t),r=document.createElement("canvas");r.width=e.width,r.height=e.height;const n=r.getContext("2d");if(n==null)throw new Error("2d canvas context not supported on browser or machine.");return n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height)}o.imgBuffer2imgData=u;function m(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const r=e.getContext("2d");if(r==null)throw new Error("2d canvas context not supported on browser or machine.");return r.putImageData(t,0,0),e.toDataURL("image/webp",1)}o.imgData2url=m;function s(t){return!(!t.complete||t.naturalWidth===0)}o.isImageLoaded=s;function v(t){return new Promise((e,r)=>{if(s(t))e(!0);else{let n=function(){e(!0),t.removeEventListener("load",n),t.removeEventListener("error",a)},a=function(){r("Failed to load image."),t.removeEventListener("load",n),t.removeEventListener("error",a)};t.addEventListener("load",n),t.addEventListener("error",a)}})}o.awaitImageLoad=v})(c||(c={}));export{c as I};
